{"ast":null,"code":"var _jsxFileName = \"/Users/aerafkhan/Desktop/Seneca/Capstone/HomeCook/home-cook-frontend/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { fetchUserSession, fetchStoredMealPlan, generateMealPlan, generateGroceryList, generateInstructions } from \"../services/homeService\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst dayNames = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\n\n// Normalize a date (or string) to ISO yyyy-mm-dd of the Monday that starts that week\nconst getWeekStart = d => {\n  const date = new Date(d);\n  const day = (date.getDay() + 6) % 7; // Monday = 0\n  date.setHours(0, 0, 0, 0);\n  date.setDate(date.getDate() - day);\n  return date.toISOString().slice(0, 10);\n};\nconst formatWeekRange = weekStartISO => {\n  const start = new Date(weekStartISO);\n  const end = new Date(start);\n  end.setDate(end.getDate() + 6);\n  const fmt = dt => dt.toLocaleString(undefined, {\n    month: \"long\",\n    day: \"numeric\"\n  });\n  return `${fmt(start)} - ${fmt(end)}`;\n};\n\n/** Renders recipe details from either:\n *  - structured object { ingredients:[], instructions:[], cookTimeMinutes? }\n *  - plain string with \\n and/or \"1. 2. 3.\" style numbering\n */\nfunction RecipeDetails({\n  details\n}) {\n  if (!details) return null;\n\n  // Structured object path\n  if (typeof details === \"object\") {\n    const {\n      ingredients,\n      instructions,\n      cookTimeMinutes\n    } = details;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 space-y-4\",\n      children: [Array.isArray(ingredients) && ingredients.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold text-slate-800 mb-1\",\n          children: \"Ingredients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-disc pl-6 text-slate-700 space-y-1\",\n          children: ingredients.map((it, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: it\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), Array.isArray(instructions) && instructions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold text-slate-800 mb-1\",\n          children: \"Instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"list-decimal pl-6 text-slate-700 space-y-1\",\n          children: instructions.map((step, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: step\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), typeof cookTimeMinutes === \"number\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-slate-500\",\n        children: [\"~\", cookTimeMinutes, \" min\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Plain string path\n  const text = String(details).trim();\n\n  // Try to split on newlines first\n  let steps = text.split(/\\r?\\n+/).map(s => s.trim()).filter(Boolean);\n\n  // If model packed everything into one line, split on numbered steps too\n  if (steps.length === 1) {\n    steps = text.split(/\\s*(?=\\d+\\s*[.)]\\s+)/g) // split before \"1. \" \"2) \" etc.\n    .map(s => s.replace(/^\\d+\\s*[.)]\\s*/, \"\").trim()).filter(Boolean);\n  } else {\n    // Strip any bullets or leading numbers from each line\n    steps = steps.map(s => s.replace(/^\\s*(?:[-*‚Ä¢]|\\d+[.)])\\s*/, \"\"));\n  }\n\n  // If we still can‚Äôt confidently split, just preserve line breaks\n  if (steps.length <= 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 text-sm text-slate-600 whitespace-pre-line\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"ol\", {\n    className: \"mt-2 list-decimal pl-6 text-slate-700 space-y-1\",\n    children: steps.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: s\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_c = RecipeDetails;\nfunction Dashboard() {\n  _s();\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [mealHistory, setMealHistory] = useState([]);\n  const [selectedWeekIdx, setSelectedWeekIdx] = useState(0); // index in availableWeeks\n  const [selectedDayIdx, setSelectedDayIdx] = useState(() => {\n    // default to today's weekday (Mon=0..Sun=6)\n    const d = new Date();\n    return (d.getDay() + 6) % 7;\n  });\n\n  // Load user + stored plan history\n  useEffect(() => {\n    (async () => {\n      try {\n        const user = await fetchUserSession();\n        setName(user.name || \"Guest\");\n        const stored = await fetchStoredMealPlan();\n        if (Array.isArray(stored.history)) {\n          setMealHistory(stored.history);\n        }\n      } catch (err) {\n        console.error(\"Session fetch error:\", err);\n        setName(\"Guest\");\n      }\n    })();\n  }, []);\n\n  // Build a map of weekKey -> entry and a sorted list of available weeks\n  const {\n    plansByWeek,\n    availableWeeks\n  } = useMemo(() => {\n    const map = {};\n    for (const entry of mealHistory) {\n      if (!(entry !== null && entry !== void 0 && entry.startDate)) continue;\n      const key = getWeekStart(entry.startDate);\n      map[key] = entry;\n    }\n    // Sort ascending by week start (oldest first)\n    const weeks = Object.keys(map).sort((a, b) => new Date(a).getTime() - new Date(b).getTime());\n    return {\n      plansByWeek: map,\n      availableWeeks: weeks\n    };\n  }, [mealHistory]);\n\n  // If weeks change, snap selection intelligently\n  useEffect(() => {\n    if (availableWeeks.length === 0) return;\n    // Find ‚Äútoday‚Äù week if present, else last\n    const todayKey = getWeekStart(new Date());\n    const idx = availableWeeks.findIndex(w => w === todayKey);\n    setSelectedWeekIdx(idx >= 0 ? idx : availableWeeks.length - 1);\n  }, [availableWeeks]);\n  const currentWeekKey = availableWeeks.length > 0 ? availableWeeks[selectedWeekIdx] : null;\n  const currentWeek = currentWeekKey ? plansByWeek[currentWeekKey] : null;\n  const currentPlan = (currentWeek === null || currentWeek === void 0 ? void 0 : currentWeek.plan) || []; // array of 7 days\n  const currentInstr = (currentWeek === null || currentWeek === void 0 ? void 0 : currentWeek.instructions) || {}; // { \"Day 1\": { Breakfast: \"...\", ... } }\n\n  const handleGenerate = async () => {\n    const includeCurrent = window.confirm(\"Generate meal plan for the remainder of this week as well? Click Cancel for next week only.\");\n    setLoading(true);\n    try {\n      if (includeCurrent) {\n        await generateMealPlan(0);\n        await generateInstructions();\n        await generateGroceryList(0);\n      }\n      await generateMealPlan(1);\n      await generateInstructions();\n      await generateGroceryList(1);\n      const updated = await fetchStoredMealPlan();\n      if (Array.isArray(updated.history)) {\n        setMealHistory(updated.history);\n      }\n    } catch (err) {\n      console.error(\"Generation error:\", err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const goPrevWeek = () => {\n    setSelectedWeekIdx(i => Math.max(0, i - 1));\n    setSelectedDayIdx(0);\n  };\n  const goNextWeek = () => {\n    setSelectedWeekIdx(i => Math.min(availableWeeks.length - 1, i + 1));\n    setSelectedDayIdx(0);\n  };\n\n  // Meals for selected day (object with Breakfast/Lunch/Dinner‚Ä¶)\n  const mealsForDay = currentPlan[selectedDayIdx] || {};\n  const instrForDay = currentInstr[`Day ${selectedDayIdx + 1}`] || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-slate-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto max-w-6xl px-4 pt-10 pb-16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-3xl bg-white/80 backdrop-blur shadow-xl ring-1 ring-black/5 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 sm:p-8 bg-gradient-to-r from-indigo-50 via-sky-50 to-purple-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl sm:text-3xl font-bold text-slate-800\",\n            children: [\"Welcome, \", name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-slate-500\",\n            children: \"Let\\u2019s get cookin\\u2019 \\uD83C\\uDF73\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), availableWeeks.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 sm:p-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleGenerate,\n            className: \"inline-flex items-center rounded-xl bg-indigo-600 px-5 py-2.5 text-white font-medium shadow hover:bg-indigo-700 active:scale-[0.99] transition\",\n            children: \"Generate Meal Plan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-3 text-sm text-slate-600\",\n            children: \"Generating your meal plan... \\uD83C\\uDF7D\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between px-6 sm:px-8 py-4 border-b border-slate-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goPrevWeek,\n                disabled: selectedWeekIdx === 0,\n                className: \"rounded-full border border-slate-300 bg-white px-2.5 py-1 text-sm text-slate-700 disabled:opacity-40\",\n                title: \"Previous week\",\n                children: \"\\u2039\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center gap-2 rounded-full bg-sky-600/10 text-sky-800 px-3 py-1.5 text-sm font-medium\",\n                children: [\"Week of \", formatWeekRange(currentWeekKey)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goNextWeek,\n                disabled: selectedWeekIdx === availableWeeks.length - 1,\n                className: \"rounded-full border border-slate-300 bg-white px-2.5 py-1 text-sm text-slate-700 disabled:opacity-40\",\n                title: \"Next week\",\n                children: \"\\u203A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 sm:px-8 py-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: dayNames.map((label, idx) => {\n                const isActive = idx === selectedDayIdx;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setSelectedDayIdx(idx),\n                  className: `rounded-full px-3 py-1.5 text-xs font-medium border transition ${isActive ? \"bg-indigo-600 text-white border-indigo-600 shadow-sm\" : \"bg-white text-slate-600 border-slate-200 hover:bg-slate-50\"}`,\n                  children: label\n                }, label, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 sm:px-8 pb-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-8\",\n              children: [\"Breakfast\", \"Lunch\", \"Dinner\"].map(sectionKey => {\n                const description = mealsForDay[sectionKey];\n                if (!description) return null;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"h-2.5 w-2.5 rounded-full bg-sky-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-slate-800 font-semibold\",\n                      children: sectionKey\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 311,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rounded-2xl border border-slate-200 bg-white shadow-sm\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between gap-3 px-4 py-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"min-w-0\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"font-medium text-slate-800\",\n                          children: description\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 320,\n                          columnNumber: 31\n                        }, this), (instrForDay === null || instrForDay === void 0 ? void 0 : instrForDay[sectionKey]) && /*#__PURE__*/_jsxDEV(RecipeDetails, {\n                          details: instrForDay[sectionKey]\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 326,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center gap-2 shrink-0\",\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100\",\n                          children: \"Swap\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 335,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 25\n                  }, this)]\n                }, sectionKey, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"Lxo5/ok4sZWYZC8GBe4/xUdIiBk=\");\n_c2 = Dashboard;\nexport default Dashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"RecipeDetails\");\n$RefreshReg$(_c2, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","fetchUserSession","fetchStoredMealPlan","generateMealPlan","generateGroceryList","generateInstructions","jsxDEV","_jsxDEV","Fragment","_Fragment","dayNames","getWeekStart","d","date","Date","day","getDay","setHours","setDate","getDate","toISOString","slice","formatWeekRange","weekStartISO","start","end","fmt","dt","toLocaleString","undefined","month","RecipeDetails","details","ingredients","instructions","cookTimeMinutes","className","children","Array","isArray","length","fileName","_jsxFileName","lineNumber","columnNumber","map","it","i","step","text","String","trim","steps","split","s","filter","Boolean","replace","_c","Dashboard","_s","name","setName","loading","setLoading","mealHistory","setMealHistory","selectedWeekIdx","setSelectedWeekIdx","selectedDayIdx","setSelectedDayIdx","user","stored","history","err","console","error","plansByWeek","availableWeeks","entry","startDate","key","weeks","Object","keys","sort","a","b","getTime","todayKey","idx","findIndex","w","currentWeekKey","currentWeek","currentPlan","plan","currentInstr","handleGenerate","includeCurrent","window","confirm","updated","message","goPrevWeek","Math","max","goNextWeek","min","mealsForDay","instrForDay","onClick","disabled","title","label","isActive","sectionKey","description","_c2","$RefreshReg$"],"sources":["/Users/aerafkhan/Desktop/Seneca/Capstone/HomeCook/home-cook-frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport {\n  fetchUserSession,\n  fetchStoredMealPlan,\n  generateMealPlan,\n  generateGroceryList,\n  generateInstructions,\n} from \"../services/homeService\";\n\nconst dayNames = [\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n  \"Sunday\",\n];\n\n// Normalize a date (or string) to ISO yyyy-mm-dd of the Monday that starts that week\nconst getWeekStart = (d) => {\n  const date = new Date(d);\n  const day = (date.getDay() + 6) % 7; // Monday = 0\n  date.setHours(0, 0, 0, 0);\n  date.setDate(date.getDate() - day);\n  return date.toISOString().slice(0, 10);\n};\n\nconst formatWeekRange = (weekStartISO) => {\n  const start = new Date(weekStartISO);\n  const end = new Date(start);\n  end.setDate(end.getDate() + 6);\n\n  const fmt = (dt) =>\n    dt.toLocaleString(undefined, {\n      month: \"long\",\n      day: \"numeric\",\n    });\n\n  return `${fmt(start)} - ${fmt(end)}`;\n};\n\n/** Renders recipe details from either:\n *  - structured object { ingredients:[], instructions:[], cookTimeMinutes? }\n *  - plain string with \\n and/or \"1. 2. 3.\" style numbering\n */\nfunction RecipeDetails({ details }) {\n  if (!details) return null;\n\n  // Structured object path\n  if (typeof details === \"object\") {\n    const { ingredients, instructions, cookTimeMinutes } = details;\n    return (\n      <div className=\"mt-2 space-y-4\">\n        {Array.isArray(ingredients) && ingredients.length > 0 && (\n          <div>\n            <h5 className=\"font-semibold text-slate-800 mb-1\">Ingredients</h5>\n            <ul className=\"list-disc pl-6 text-slate-700 space-y-1\">\n              {ingredients.map((it, i) => (\n                <li key={i}>{it}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {Array.isArray(instructions) && instructions.length > 0 && (\n          <div>\n            <h5 className=\"font-semibold text-slate-800 mb-1\">Instructions</h5>\n            <ol className=\"list-decimal pl-6 text-slate-700 space-y-1\">\n              {instructions.map((step, i) => (\n                <li key={i}>{step}</li>\n              ))}\n            </ol>\n          </div>\n        )}\n\n        {typeof cookTimeMinutes === \"number\" && (\n          <div className=\"text-xs text-slate-500\">~{cookTimeMinutes} min</div>\n        )}\n      </div>\n    );\n  }\n\n  // Plain string path\n  const text = String(details).trim();\n\n  // Try to split on newlines first\n  let steps = text.split(/\\r?\\n+/).map((s) => s.trim()).filter(Boolean);\n\n  // If model packed everything into one line, split on numbered steps too\n  if (steps.length === 1) {\n    steps = text\n      .split(/\\s*(?=\\d+\\s*[.)]\\s+)/g) // split before \"1. \" \"2) \" etc.\n      .map((s) => s.replace(/^\\d+\\s*[.)]\\s*/, \"\").trim())\n      .filter(Boolean);\n  } else {\n    // Strip any bullets or leading numbers from each line\n    steps = steps.map((s) => s.replace(/^\\s*(?:[-*‚Ä¢]|\\d+[.)])\\s*/, \"\"));\n  }\n\n  // If we still can‚Äôt confidently split, just preserve line breaks\n  if (steps.length <= 1) {\n    return (\n      <div className=\"mt-2 text-sm text-slate-600 whitespace-pre-line\">\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <ol className=\"mt-2 list-decimal pl-6 text-slate-700 space-y-1\">\n      {steps.map((s, i) => (\n        <li key={i}>{s}</li>\n      ))}\n    </ol>\n  );\n}\n\nfunction Dashboard() {\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [mealHistory, setMealHistory] = useState([]);\n  const [selectedWeekIdx, setSelectedWeekIdx] = useState(0); // index in availableWeeks\n  const [selectedDayIdx, setSelectedDayIdx] = useState(() => {\n    // default to today's weekday (Mon=0..Sun=6)\n    const d = new Date();\n    return (d.getDay() + 6) % 7;\n  });\n\n  // Load user + stored plan history\n  useEffect(() => {\n    (async () => {\n      try {\n        const user = await fetchUserSession();\n        setName(user.name || \"Guest\");\n\n        const stored = await fetchStoredMealPlan();\n        if (Array.isArray(stored.history)) {\n          setMealHistory(stored.history);\n        }\n      } catch (err) {\n        console.error(\"Session fetch error:\", err);\n        setName(\"Guest\");\n      }\n    })();\n  }, []);\n\n  // Build a map of weekKey -> entry and a sorted list of available weeks\n  const { plansByWeek, availableWeeks } = useMemo(() => {\n    const map = {};\n    for (const entry of mealHistory) {\n      if (!entry?.startDate) continue;\n      const key = getWeekStart(entry.startDate);\n      map[key] = entry;\n    }\n    // Sort ascending by week start (oldest first)\n    const weeks = Object.keys(map).sort(\n      (a, b) => new Date(a).getTime() - new Date(b).getTime()\n    );\n\n    return { plansByWeek: map, availableWeeks: weeks };\n  }, [mealHistory]);\n\n  // If weeks change, snap selection intelligently\n  useEffect(() => {\n    if (availableWeeks.length === 0) return;\n    // Find ‚Äútoday‚Äù week if present, else last\n    const todayKey = getWeekStart(new Date());\n    const idx = availableWeeks.findIndex((w) => w === todayKey);\n    setSelectedWeekIdx(idx >= 0 ? idx : availableWeeks.length - 1);\n  }, [availableWeeks]);\n\n  const currentWeekKey =\n    availableWeeks.length > 0 ? availableWeeks[selectedWeekIdx] : null;\n  const currentWeek = currentWeekKey ? plansByWeek[currentWeekKey] : null;\n  const currentPlan = currentWeek?.plan || []; // array of 7 days\n  const currentInstr = currentWeek?.instructions || {}; // { \"Day 1\": { Breakfast: \"...\", ... } }\n\n  const handleGenerate = async () => {\n    const includeCurrent = window.confirm(\n      \"Generate meal plan for the remainder of this week as well? Click Cancel for next week only.\"\n    );\n    setLoading(true);\n    try {\n      if (includeCurrent) {\n        await generateMealPlan(0);\n        await generateInstructions();\n        await generateGroceryList(0);\n      }\n      await generateMealPlan(1);\n      await generateInstructions();\n      await generateGroceryList(1);\n\n      const updated = await fetchStoredMealPlan();\n      if (Array.isArray(updated.history)) {\n        setMealHistory(updated.history);\n      }\n    } catch (err) {\n      console.error(\"Generation error:\", err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const goPrevWeek = () => {\n    setSelectedWeekIdx((i) => Math.max(0, i - 1));\n    setSelectedDayIdx(0);\n  };\n  const goNextWeek = () => {\n    setSelectedWeekIdx((i) => Math.min(availableWeeks.length - 1, i + 1));\n    setSelectedDayIdx(0);\n  };\n\n  // Meals for selected day (object with Breakfast/Lunch/Dinner‚Ä¶)\n  const mealsForDay = currentPlan[selectedDayIdx] || {};\n  const instrForDay = currentInstr[`Day ${selectedDayIdx + 1}`] || {};\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      <div className=\"mx-auto max-w-6xl px-4 pt-10 pb-16\">\n        {/* Header Card */}\n        <div className=\"rounded-3xl bg-white/80 backdrop-blur shadow-xl ring-1 ring-black/5 overflow-hidden\">\n          <div className=\"p-6 sm:p-8 bg-gradient-to-r from-indigo-50 via-sky-50 to-purple-50\">\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-slate-800\">\n              Welcome, {name}\n            </h1>\n            <p className=\"mt-1 text-slate-500\">Let‚Äôs get cookin‚Äô üç≥</p>\n          </div>\n\n          {/* If no data yet, show generator */}\n          {availableWeeks.length === 0 ? (\n            <div className=\"p-6 sm:p-8\">\n              <button\n                onClick={handleGenerate}\n                className=\"inline-flex items-center rounded-xl bg-indigo-600 px-5 py-2.5 text-white font-medium shadow hover:bg-indigo-700 active:scale-[0.99] transition\"\n              >\n                Generate Meal Plan\n              </button>\n              {loading && (\n                <p className=\"mt-3 text-sm text-slate-600\">\n                  Generating your meal plan... üçΩÔ∏è\n                </p>\n              )}\n            </div>\n          ) : (\n            <>\n              {/* Week nav row */}\n              <div className=\"flex items-center justify-between px-6 sm:px-8 py-4 border-b border-slate-200\">\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={goPrevWeek}\n                    disabled={selectedWeekIdx === 0}\n                    className=\"rounded-full border border-slate-300 bg-white px-2.5 py-1 text-sm text-slate-700 disabled:opacity-40\"\n                    title=\"Previous week\"\n                  >\n                    ‚Äπ\n                  </button>\n\n                  <span className=\"inline-flex items-center gap-2 rounded-full bg-sky-600/10 text-sky-800 px-3 py-1.5 text-sm font-medium\">\n                    Week of {formatWeekRange(currentWeekKey)}\n                  </span>\n\n                  <button\n                    onClick={goNextWeek}\n                    disabled={selectedWeekIdx === availableWeeks.length - 1}\n                    className=\"rounded-full border border-slate-300 bg-white px-2.5 py-1 text-sm text-slate-700 disabled:opacity-40\"\n                    title=\"Next week\"\n                  >\n                    ‚Ä∫\n                  </button>\n                </div>\n\n                {/* Optional: actions like grocery list later */}\n                <div />\n              </div>\n\n              {/* Day pills */}\n              <div className=\"px-6 sm:px-8 py-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {dayNames.map((label, idx) => {\n                    const isActive = idx === selectedDayIdx;\n                    return (\n                      <button\n                        key={label}\n                        onClick={() => setSelectedDayIdx(idx)}\n                        className={`rounded-full px-3 py-1.5 text-xs font-medium border transition ${\n                          isActive\n                            ? \"bg-indigo-600 text-white border-indigo-600 shadow-sm\"\n                            : \"bg-white text-slate-600 border-slate-200 hover:bg-slate-50\"\n                        }`}\n                      >\n                        {label}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Meals for selected day */}\n              <div className=\"px-6 sm:px-8 pb-8\">\n                <div className=\"space-y-8\">\n                  {[\"Breakfast\", \"Lunch\", \"Dinner\"].map((sectionKey) => {\n                    const description = mealsForDay[sectionKey];\n                    if (!description) return null;\n\n                    return (\n                      <div key={sectionKey} className=\"space-y-3\">\n                        {/* Section header */}\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"h-2.5 w-2.5 rounded-full bg-sky-500\" />\n                          <h4 className=\"text-slate-800 font-semibold\">\n                            {sectionKey}\n                          </h4>\n                        </div>\n\n                        {/* Meal card */}\n                        <div className=\"rounded-2xl border border-slate-200 bg-white shadow-sm\">\n                          <div className=\"flex items-center justify-between gap-3 px-4 py-4\">\n                            <div className=\"min-w-0\">\n                              <div className=\"font-medium text-slate-800\">\n                                {description}\n                              </div>\n\n                              {/* üëá Render instructions from Mongo, formatted nicely */}\n                              {instrForDay?.[sectionKey] && (\n                                <RecipeDetails details={instrForDay[sectionKey]} />\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center gap-2 shrink-0\">\n                              {/* Example time badge if you add times later */}\n                              {/* <span className=\"rounded-full border border-slate-200 bg-slate-50 px-2.5 py-0.5 text-xs text-slate-600\">\n                                10 min\n                              </span> */}\n                              <button\n                                className=\"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 hover:bg-slate-100\"\n                                \n                              >\n                                Swap\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}